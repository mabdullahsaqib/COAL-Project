     1                                  [org 0x0100]
     2                                  section .text
     3 00000000 EB34                    jmp start
     4 00000002 56                      timer:		push si
     5 00000003 50                      			push ax
     6 00000004 52                      			push dx
     7 00000005 26C60502                			mov byte[es:di],2
     8 00000009 83C701                  			add di,1
     9                                  			;send DSP command 10h
    10 0000000C BA2C02                  			mov dx, 22ch
    11 0000000F B010                    			mov al,10h
    12 00000011 EE                      			out dx,al
    13                                  			;send byte audio sample
    14 00000012 8B36[4DC9]              			mov si, [sound_index]
    15 00000016 8A84[0400]              			mov al,[sound_data+si]
    16 0000001A EE                      			out dx,al
    17 0000001B 8306[4DC9]01            			add word[sound_index],1
    18 00000020 813E[4DC9]38C7          			cmp word[sound_index], 51000
    19 00000026 7506                    			jne timerskip
    20 00000028 C706[4DC9]0000          			mov word[sound_index],0
    21                                  			timerskip:
    22 0000002E 5A                      			pop dx
    23 0000002F 58                      			pop ax
    24 00000030 5E                      			pop si
    25 00000031 2EFF2E[0000]            			jmp far[cs:timerinterrupt]
    26                                  start:
    27 00000036 FA                      cli
    28 00000037 31C0                    		xor ax, ax
    29 00000039 8EC0                    		mov es, ax					; es=0, point es to IVT base
    30 0000003B 26A17000                		mov ax,[es:1ch*4]
    31 0000003F A3[0000]                		mov word [timerinterrupt],ax
    32 00000042 26A17200                		mov ax,[es:1ch*4+2]
    33 00000046 A3[0200]                		mov word [timerinterrupt+2],ax
    34 00000049 26C7067000[0200]        		mov word[es:1ch*4],timer
    35 00000050 268C0E7200              		mov [es:1ch*4+2],cs
    36 00000055 B036                    		mov al, 0x36    ; Set the command byte for Channel 0, 16-bit binary, square wave
    37 00000057 E643                    		out 0x43, al    ; Send the command byte
    38 00000059 B85401                  		mov ax, 340    ; Set the desired frequency
    39 0000005C E640                    		out 0x40, al    ; Send the low byte of the divisor
    40 0000005E 88E0                    		mov al, ah      ; Get the high byte of the divisor
    41 00000060 E640                    		out 0x40, al    ; Send the high byte of the divisor
    42 00000062 31FF                    		xor di,di
    43 00000064 B800A0                  		mov ax,0xA000
    44 00000067 8EC0                    		mov es,ax
    45 00000069 B81300                  		mov ax,13h
    46 0000006C CD10                    		int 0x10
    47 0000006E FB                      sti
    48                                  loop1:
    49 0000006F B80500                  	 mov ax,5
    50 00000072 01C3                    	 add bx,ax
    51 00000074 EBF9                         jmp loop1
    52                                  
    53 00000076 FA                      cli	
    54 00000077 31C0                    		xor ax,ax
    55 00000079 8EC0                    		mov es,ax
    56 0000007B A1[0000]                		mov ax,[timerinterrupt]
    57 0000007E 26A37000                		mov word [es:1ch*4],ax
    58 00000082 A1[0200]                		mov ax,[timerinterrupt+2]
    59 00000085 26A37200                		mov word [es:1ch*4+2],ax
    60 00000089 FB                      sti
    61 0000008A B8004C                  mov ax,0x4c00
    62 0000008D CD21                    int 0x21
    63                                  	
    64                                  section .data
    65 00000000 00000000                timerinterrupt:dw 0,0
    66                                  sound_data: 
    67 00000004 <bin C949h>             		incbin "kingsv.wav" ;51,529 bytes
    68 0000C94D 0000                    sound_index: dw 0
