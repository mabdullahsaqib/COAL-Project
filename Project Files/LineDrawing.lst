     1                                  [org 0x0100]
     2 00000000 E98100                  jmp start
     3                                  
     4                                  ;bp+6 x
     5                                  ;bp+4 y
     6                                  DrawPoint:
     7 00000003 55                      		push bp
     8 00000004 60                      		pusha
     9 00000005 06                      		push es
    10 00000006 31D2                    		xor dx,dx
    11 00000008 8B4604                  		mov ax,[bp+4]
    12 0000000B B95000                  		mov cx,80
    13 0000000E F7E1                    		mul cx
    14 00000010 034606                  		add ax,[bp+6]
    15 00000013 D1E0                    		shl ax,1
    16 00000015 89C7                    		mov di,ax
    17 00000017 B800B8                  		mov ax,0xb800
    18 0000001A 8EC0                    		mov es,ax
    19 0000001C B82007                  		mov ax,0x0720
    20 0000001F B02A                    		mov al,'*'
    21 00000021 268905                  		mov [es:di],ax
    22 00000024 07                      		pop es
    23 00000025 61                      		popa
    24 00000026 C20400                  		ret 4
    25                                  LineDraw:
    26 00000029 55                      		push bp
    27 0000002A 83EC04                  		sub sp,4
    28 0000002D 60                      		pusha
    29 0000002E A1[9000]                		mov ax,[x2]
    30 00000031 2B06[8C00]              		sub ax,[x1]
    31 00000035 8B1E[9200]              		mov bx,[y2]
    32 00000039 2B1E[8E00]              		sub bx,[y1]
    33 0000003D 80FFFF                  		cmp bh,0xFF
    34 00000040 7502                    		jne skipneg
    35 00000042 F7DB                    		neg bx
    36                                  		skipneg:
    37 00000044 39D8                    		cmp ax,bx
    38 00000046 7302                    		jnc LineX
    39                                  LineY:
    40                                  		
    41 00000048 EB33                    		jmp LineDrawEnd
    42                                  LineX:
    43 0000004A 50                      		push ax
    44 0000004B 31D2                    		xor dx,dx
    45 0000004D F7F3                    		div bx
    46 0000004F 89C1                    		mov cx,ax
    47 00000051 58                      		pop ax
    48 00000052 8B16[8C00]              		mov dx,[x1]
    49 00000056 8956FE                  		mov [bp-2],dx
    50 00000059 8B16[8E00]              		mov dx,[y1]
    51 0000005D 8956FC                  		mov [bp-4],dx
    52 00000060 51                      		push cx
    53                                  		linedrawloopx:
    54 00000061 FF76FE                  					push word[bp-2]
    55 00000064 FF76FC                  					push word[bp-4]
    56 00000067 E899FF                  					call DrawPoint
    57 0000006A 83E901                  					sub cx,1
    58 0000006D 7505                    					jnz linedrawincskip
    59 0000006F FF46FC                  					inc word[bp-4]
    60 00000072 59                      					pop cx
    61 00000073 51                      					push cx
    62                                  					linedrawincskip:
    63 00000074 8B16[9000]              					mov dx,[x2]
    64 00000078 3B56FC                  					cmp dx,[bp-4]
    65 0000007B 72E4                    					jc linedrawloopx
    66                                  		LineDrawEnd:
    67 0000007D 59                      		pop cx
    68 0000007E 61                      		popa
    69 0000007F 83C404                  		add sp,4
    70 00000082 5D                      		pop bp
    71 00000083 C3                      		ret
    72                                  		
    73                                  start:
    74 00000084 E8A2FF                  call LineDraw
    75                                  
    76                                  
    77                                  
    78                                  
    79 00000087 B8004C                  mov ax,0x4c00
    80 0000008A CD21                    int 0x21
    81                                  
    82 0000008C 0500                    x1:dw 5
    83 0000008E 0500                    y1:dw 5
    84                                  
    85 00000090 0A00                    x2:dw 10
    86 00000092 0700                    y2:dw 7
