     1                                  [org 0x0100]
     2                                  
     3 00000000 E9D400                  jmp start
     4                                  RotateScreenRight:
     5 00000003 55                      			push bp
     6 00000004 89E5                    			mov bp,sp
     7 00000006 83EC04                  			sub sp,4
     8 00000009 60                      			pusha
     9 0000000A 06                      			push es
    10 0000000B 1E                      			push ds
    11 0000000C B800B8                  			mov ax,0xb800
    12 0000000F 8EC0                    			mov es,ax
    13 00000011 8ED8                    			mov ds,ax
    14 00000013 C746FE0000              			mov word[bp-2],0
    15 00000018 FC                      			cld
    16 00000019 B85000                  			mov ax,80
    17 0000001C F76606                  			mul word[bp+6]
    18 0000001F 034604                  			add ax,word[bp+4]
    19 00000022 D1E0                    			shl ax,1
    20 00000024 89C7                    			mov di,ax
    21 00000026 89C6                    			mov si,ax
    22 00000028 57                      			push di
    23 00000029 56                      			push si
    24                                  			transposeloop1:
    25 0000002A 8B46FE                  							mov ax,[bp-2]
    26 0000002D 8946FC                  							mov [bp-4],ax
    27 00000030 56                      							push si
    28 00000031 57                      							push di
    29                                  							transposeloop2:
    30 00000032 83C602                  										  add si,2
    31 00000035 81C7A000                										  add di,160
    32 00000039 AD                      										  lodsw
    33 0000003A 83EE02                  										  sub si,2
    34 0000003D A5                      										  movsw
    35 0000003E 83EE02                  										  sub si,2
    36 00000041 83EF02                  										  sub di,2
    37 00000044 57                      										  push di
    38 00000045 89F7                    										  mov di,si
    39 00000047 AB                      										  stosw
    40 00000048 5F                      										  pop di
    41 00000049 8346FC01                										  add word[bp-4],1
    42 0000004D 837EFC04                										  cmp word[bp-4],4
    43 00000051 75DF                    										  jnz transposeloop2
    44 00000053 5F                      							pop di
    45 00000054 5E                      							pop si
    46 00000055 81C7A200                							add di,162
    47 00000059 81C6A200                							add si,162
    48 0000005D 8346FE01                							add word[bp-2],1
    49 00000061 837EFE04                							cmp word[bp-2],4
    50 00000065 75C3                    							jnz transposeloop1
    51 00000067 5E                      				pop si
    52 00000068 5F                      				pop di
    53 00000069 C746FE0000              				mov word[bp-2],0
    54                                  				shiftloop1:
    55 0000006E 56                      							push si
    56 0000006F 57                      							push di
    57 00000070 C746FC0000              							mov word[bp-4],0
    58                                  							shiftloop2:
    59 00000075 AD                      										lodsw
    60 00000076 83EE02                  										sub si,2
    61 00000079 A5                      										movsw
    62 0000007A 83EF02                  										sub di,2
    63 0000007D 83EE02                  										sub si,2
    64 00000080 57                      										push di
    65 00000081 89F7                    										mov di,si
    66 00000083 AB                      										stosw
    67 00000084 5F                      										pop di
    68 00000085 81C6A000                										add si,160
    69 00000089 81C7A000                										add di,160
    70 0000008D 8346FC01                										add word[bp-4],1
    71 00000091 837EFC05                										cmp word[bp-4],5
    72 00000095 75DE                    										jnz shiftloop2
    73 00000097 5F                      							pop di
    74 00000098 5E                      							pop si
    75 00000099 83C702                  							add di,2
    76 0000009C 83EE02                  							sub si,2
    77 0000009F 8346FE01                							add word[bp-2],1
    78 000000A3 837EFE02                							cmp word[bp-2],2
    79 000000A7 75C5                    							jnz shiftloop1
    80 000000A9 1F                      			pop ds
    81 000000AA 07                      			pop es
    82 000000AB 61                      			popa
    83 000000AC 83C404                  			add sp,4
    84 000000AF 5D                      			pop bp
    85 000000B0 C20400                  			ret 4
    86                                  			
    87                                  clrscr:
    88 000000B3 60                      		pusha
    89 000000B4 06                      		push es
    90 000000B5 B800B8                  		mov ax,0xb800
    91 000000B8 8EC0                    		mov es,ax
    92 000000BA 31FF                    		xor di,di
    93 000000BC B407                    		mov ah,0x07
    94 000000BE B041                    		mov al,'A'
    95                                  		clrscrloop:
    96 000000C0 268905                  				mov [es:di],ax
    97 000000C3 83C702                  				add di,2
    98 000000C6 0401                    				add al,1
    99 000000C8 3C45                    				cmp al,'E'
   100 000000CA 7502                    				jne clrscrskip
   101 000000CC B041                    				mov al,'A'
   102                                  				clrscrskip:
   103 000000CE 81FFA00F                				cmp di,4000
   104 000000D2 75EC                    				jne clrscrloop
   105 000000D4 07                      		pop es
   106 000000D5 61                      		popa
   107 000000D6 C3                      		ret
   108                                  		
   109                                  start:
   110 000000D7 E8D9FF                  		call clrscr
   111 000000DA 6A02                    		push 2
   112 000000DC 6A03                    		push 3
   113 000000DE E822FF                  		call RotateScreenRight
   114                                  		
   115                                  		
   116 000000E1 B8004C                  		mov ax,0x4c00
   117 000000E4 CD21                    		int 0x21
